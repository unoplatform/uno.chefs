jobs:
- job: Windows
  pool:
    vmImage: windows-2022
  
  steps:
  - checkout: self
    fetchDepth: 0
    clean: true

  - template: templates/gitversion.yml
  - template: templates/dotnet6-install-windows.yml

   # This SDK version is needed as long as `uap10.0` will be supported in Uno.Core
  - powershell: .\build\Install-WindowsSdkISO.ps1 18362
    displayName: Install Windows SDK 18362

  - powershell: |
      dotnet build -c Release "/p:PackageOutputPath=$(build.artifactstagingdirectory)\nuget" "/p:PackageVersion=%GITVERSION_FullSemVer%" "/p:InformationalVersion=%GITVERSION_InformationalVersion%" /detailedsummary /bl:$(build.artifactstagingdirectory)\msbuild.binlog
    displayName: Build apps

  - task: PublishBuildArtifacts@1
    condition: always()
    inputs:
      PathtoPublish: $(build.artifactstagingdirectory)
      ArtifactName: uno-ui-toolkit-drop
      ArtifactType: Container
