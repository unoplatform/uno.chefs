<Page x:Class="Chefs.Views.NotificationsContentPage"
	  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	  xmlns:local="using:Chefs.Views"
	  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	  xmlns:win="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	  xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
	  xmlns:uen="using:Uno.Extensions.Navigation.UI"
	  xmlns:uer="using:Uno.Extensions.Reactive.UI"
	  xmlns:um="using:Uno.Material"
	  xmlns:utu="using:Uno.Toolkit.UI"
	  xmlns:converters="using:Chefs.Converters"
	  mc:Ignorable="d">

	<!-- Workaround used here by separating the NotificationsPage / NotificationsContentPage into two files -->
	<!-- Details available here: https://github.com/unoplatform/uno.toolkit.ui/issues/482 -->

	<Page.Resources>
		<x:String x:Key="Icon_Calendar_Today">F1 M 16.2 1.8181818181818181 L 15.3 1.8181818181818181 L 15.3 0 L 13.5 0 L 13.5 1.8181818181818181 L 4.5 1.8181818181818181 L 4.5 0 L 2.7 0 L 2.7 1.8181818181818181 L 1.8 1.8181818181818181 C 0.8099999785423279 1.8181818181818181 0 2.6363636146892198 0 3.6363636363636362 L 0 18.18181818181818 C 0 19.181818203492597 0.8099999785423279 20 1.8 20 L 16.2 20 C 17.19000002145767 20 18 19.181818203492597 18 18.18181818181818 L 18 3.6363636363636362 C 18 2.6363636146892198 17.19000002145767 1.8181818181818181 16.2 1.8181818181818181 Z M 16.2 18.18181818181818 L 1.8 18.18181818181818 L 1.8 6.363636363636363 L 16.2 6.363636363636363 L 16.2 18.18181818181818 Z</x:String>
		<x:String x:Key="Icon_Close">F1 M 14 1.4099998474121094 L 12.59000015258789 0 L 7 5.590000152587891 L 1.4099998474121094 0 L 0 1.4099998474121094 L 5.590000152587891 7 L 0 12.59000015258789 L 1.4099998474121094 14 L 7 8.40999984741211 L 12.59000015258789 14 L 14 12.59000015258789 L 8.40999984741211 7 L 14 1.4099998474121094 Z</x:String>
		<x:String x:Key="Icon_Notifications_Active">F1 M 5.550000190734863 1.5799999237060547 L 4.119999885559082 0.15000009536743164 C 1.7199997901916504 1.9800001382827759 0.14000000059604645 4.799999952316284 0 8 L 2.000000238418579 8 C 2.1500002443790436 5.349999904632568 3.510000228881836 3.0299999713897705 5.550000190734863 1.5799999237060547 L 5.550000190734863 1.5799999237060547 Z M 17.939998626708984 8 L 19.939998626708984 8 C 19.78999862074852 4.799999952316284 18.21000075340271 1.9800001382827759 15.820000648498535 0.15000009536743164 L 14.40000057220459 1.5799999237060547 C 16.420000553131104 3.0299999713897705 17.78999862074852 5.349999904632568 17.939998626708984 8 Z M 15.970000267028809 8.5 C 15.970000267028809 5.430000066757202 14.330000162124634 2.8599998354911804 11.470000267028809 2.179999828338623 L 11.470000267028809 1.5 C 11.470000267028809 0.6700000166893005 10.800000250339508 0 9.970000267028809 0 C 9.14000028371811 0 8.470000267028809 0.6700000166893005 8.470000267028809 1.5 L 8.470000267028809 2.179999828338623 C 5.600000381469727 2.8599998354911804 3.9700000286102295 5.420000076293945 3.9700000286102295 8.5 L 3.9700000286102295 13.5 L 1.9700000286102295 15.5 L 1.9700000286102295 16.5 L 17.969999313354492 16.5 L 17.969999313354492 15.5 L 15.970000267028809 13.5 L 15.970000267028809 8.5 Z M 9.970000267028809 19.5 C 10.110000267624855 19.5 10.239999890327454 19.489999083802104 10.369999885559082 19.459999084472656 C 11.019999861717224 19.31999908387661 11.550000429153442 18.880000710487366 11.8100004196167 18.280000686645508 C 11.910000421106815 18.040000692009926 11.960000038146973 17.780000001192093 11.960000038146973 17.5 L 7.960000038146973 17.5 C 7.970000037923455 18.600000023841858 8.860000252723694 19.5 9.970000267028809 19.5 Z</x:String>
		<x:String x:Key="Icon_People">F1 M 15 6 C 16.6599999666214 6 17.989999771118164 4.659999966621399 17.989999771118164 3 C 17.989999771118164 1.340000033378601 16.6599999666214 0 15 0 C 13.340000033378601 0 12 1.340000033378601 12 3 C 12 4.659999966621399 13.340000033378601 6 15 6 Z M 7 6 C 8.659999966621399 6 9.989999771118164 4.659999966621399 9.989999771118164 3 C 9.989999771118164 1.340000033378601 8.659999966621399 0 7 0 C 5.340000033378601 0 4 1.340000033378601 4 3 C 4 4.659999966621399 5.340000033378601 6 7 6 Z M 7 8 C 4.670000076293945 8 0 9.170000076293945 0 11.5 L 0 14 L 14 14 L 14 11.5 C 14 9.170000076293945 9.329999923706055 8 7 8 Z M 15 8 C 14.71000000834465 8 14.379999727010727 8.020000191405416 14.029999732971191 8.050000190734863 C 15.18999969959259 8.89000016450882 16 10.019999980926514 16 11.5 L 16 14 L 22 14 L 22 11.5 C 22 9.170000076293945 17.329999923706055 8 15 8 Z</x:String>
		<DataTemplate x:Key="NotificationTemplate">
			<!--Workaround Margin="0,0,36,0"-->
			<utu:AutoLayout Background="{Binding Read, Converter={StaticResource BoolToNotificationColor}}"
							CornerRadius="4"
							PrimaryAxisAlignment="Center"
							Orientation="Horizontal" 
							Padding="16"
							Spacing="16"
							Margin="0,0,36,0">
				<!--Workaround Margin="16,0,0,0"-->
				<PathIcon Data="{StaticResource Icon_Notifications_Active}" 
							utu:AutoLayout.CounterAlignment="Start" 
							Foreground="{ThemeResource PrimaryBrush}"
							Margin="16,0,0,0"/>
				<!--Workaround Margin="0,0,60,0"-->
				<utu:AutoLayout utu:AutoLayout.CounterAlignment="Start" 
								Spacing="8" 
								PrimaryAxisAlignment="Center"
								Margin="0,0,60,0">
					<TextBlock TextWrapping="Wrap" 
								Text="{Binding Title}"
								Foreground="{ThemeResource OnSurfaceBrush}"
								Style="{StaticResource TitleSmall}" />
					
					<!-- Adding Style="{StaticResource TextMediumWithLineSpacing}" causes the app to crash on Windows-->
					<TextBlock TextWrapping="Wrap" 
								Text="{Binding Description}"
								Foreground="{ThemeResource OnSurfaceMediumBrush}" />
				</utu:AutoLayout>
			</utu:AutoLayout>
		</DataTemplate>
		<DataTemplate x:Key="EmptyTemplate">
			<UserControl>
				<utu:AutoLayout Spacing="24" 
								PrimaryAxisAlignment="Center" 
								Padding="32,0" 
								utu:AutoLayout.IsIndependentLayout="True"
								VerticalAlignment="Center"
								utu:AutoLayout.PrimaryAlignment="Stretch">
					<Image Source="ms-appx:///Chefs/Assets/Icons/no_notification.png"
						   utu:AutoLayout.CounterAlignment="Center" 
						   Width="72" 
						   Height="72" />
					<TextBlock TextAlignment="Center"
							   TextWrapping="Wrap" 
							   Text="No Notifications Yet" 
							   Foreground="{ThemeResource OnSurfaceBrush}" 
							   Style="{StaticResource TitleLarge}" />
					<TextBlock TextAlignment="Center"
							   TextWrapping="Wrap" 
							   Text="Notifications about your activity, updates, and community interactions will appear here. Stay tuned for recipe inspiration, comments, likes, and more as you engage with the community."
							   Foreground="{ThemeResource OnSurfaceBrush}"
							   Style="{StaticResource TextLargeWithLineSpacing}" />
					<Button HorizontalContentAlignment="Center"
							VerticalContentAlignment="Center"
							Content="Close"
							utu:AutoLayout.CounterAlignment="Center" 
							Foreground="{ThemeResource OnSecondaryContainerBrush}" 
							CornerRadius="4" 
							Style="{StaticResource FilledTonalButtonStyle}">
						<um:ControlExtensions.Icon>
							<PathIcon Data="{StaticResource Icon_Close}" 
									  Foreground="{ThemeResource OnSecondaryContainerBrush}" />
						</um:ControlExtensions.Icon>
					</Button>
				</utu:AutoLayout>
			</UserControl>
		</DataTemplate>
	</Page.Resources>
	<utu:AutoLayout Background="{ThemeResource BackgroundBrush}" 
					PrimaryAxisAlignment="Stretch">
		<utu:NavigationBar Content="Notifications" 
							Style="{StaticResource ModalNavigationBarStyle}">
			<utu:NavigationBar.MainCommand>
				<AppBarButton>
					<AppBarButton.Icon>
						<PathIcon Data="{StaticResource Icon_Close}" />
					</AppBarButton.Icon>
				</AppBarButton>
			</utu:NavigationBar.MainCommand>
		</utu:NavigationBar>
		<utu:AutoLayout Background="{ThemeResource BackgroundBrush}" 
						uen:Region.Attached="True"
						utu:AutoLayout.PrimaryAlignment="Stretch">
			<utu:TabBar Background="{ThemeResource BackgroundBrush}" 
						uen:Region.Attached="True"
						Style="{StaticResource TopTabBarStyle}"
						Padding="16,0">
				<utu:TabBarItem Content="All" 
								uen:Region.Name="AllTab"
								IsSelected="True"/>
				<utu:TabBarItem Content="Unread" 
								uen:Region.Name="UnreadTab" 
								Foreground="{ThemeResource OnSurfaceMediumBrush}" />
				<utu:TabBarItem Content="Read" 
								uen:Region.Name="ReadTab"
								Foreground="{ThemeResource OnSurfaceMediumBrush}" />
			</utu:TabBar>
			<ScrollViewer HorizontalScrollMode="Disabled" 
						  utu:AutoLayout.PrimaryAlignment="Stretch"
						  VerticalContentAlignment="Center">
				<Grid uen:Region.Attached="True"
					  uen:Region.Navigator="Visibility">

					<!--All Notifications-->
					<utu:AutoLayout Padding="16"
									PrimaryAxisAlignment="Stretch"
									utu:AutoLayout.PrimaryAlignment="Stretch"
									uen:Region.Name="AllTab"
									Visibility="Visible">
						<uer:FeedView x:Name="AllFeed"
									  Source="{Binding Notifications}"
									  NoneTemplate="{StaticResource EmptyTemplate}">
							<DataTemplate>
								<utu:AutoLayout>
									<!--Today-->
									<utu:AutoLayout Visibility="{Binding Data.HasTodayNotifications}"
													Padding="0,16"
													Spacing="16">
										<TextBlock TextWrapping="Wrap" 
												   Text="Today"
												   Foreground="{ThemeResource OnSurfaceBrush}"
												   Style="{StaticResource LabelLarge}" />
										<muxc:ItemsRepeater ItemsSource="{Binding Data.Today}"
															ItemTemplate="{StaticResource NotificationTemplate}">
											<muxc:ItemsRepeater.Layout>
												<muxc:StackLayout Orientation="Vertical"
																  Spacing="2" />
											</muxc:ItemsRepeater.Layout>
										</muxc:ItemsRepeater>
									</utu:AutoLayout>

									<!--Yesterday-->
									<utu:AutoLayout Visibility="{Binding Data.HasYesterdayNotifications}"
													Padding="0,16"
													Spacing="16">
										<TextBlock TextWrapping="Wrap" 
													Text="Yesterday"
													Foreground="{ThemeResource OnSurfaceBrush}"
													Style="{StaticResource LabelLarge}" />
										<muxc:ItemsRepeater ItemsSource="{Binding Data.Yesterday}"
															ItemTemplate="{StaticResource NotificationTemplate}">
											<muxc:ItemsRepeater.Layout>
												<muxc:StackLayout Orientation="Vertical"
																  Spacing="2" />
											</muxc:ItemsRepeater.Layout>
										</muxc:ItemsRepeater>
									</utu:AutoLayout>

									<!--Older-->
									<utu:AutoLayout Visibility="{Binding Data.HasOlderNotifications}"
													Padding="0,16"
													Spacing="16">
										<TextBlock TextWrapping="Wrap" 
												   Text="Older"
												   Foreground="{ThemeResource OnSurfaceBrush}"
												   Style="{StaticResource LabelLarge}" />
										<muxc:ItemsRepeater ItemsSource="{Binding Data.Older}"
															ItemTemplate="{StaticResource NotificationTemplate}">
											<muxc:ItemsRepeater.Layout>
												<muxc:StackLayout Orientation="Vertical"
																  Spacing="2" />
											</muxc:ItemsRepeater.Layout>
										</muxc:ItemsRepeater>
									</utu:AutoLayout>
								</utu:AutoLayout>
							</DataTemplate>
						</uer:FeedView>
					</utu:AutoLayout>

					<!--Unread-->
					<utu:AutoLayout Padding="16"
									PrimaryAxisAlignment="Stretch"
									utu:AutoLayout.PrimaryAlignment="Stretch"
									uen:Region.Name="UnreadTab"
									Visibility="Collapsed">
						<uer:FeedView x:Name="UnreadFeed"
									  Source="{Binding Unread}"
									  NoneTemplate="{StaticResource EmptyTemplate}">
							<DataTemplate>
								<utu:AutoLayout>
									<!--Today-->
									<utu:AutoLayout Visibility="{Binding Data.HasTodayNotifications}"
													Padding="0,16"
													Spacing="16">
										<TextBlock TextWrapping="Wrap" 
													Text="Today"
													Foreground="{ThemeResource OnSurfaceBrush}"
													Style="{StaticResource LabelLarge}" />
										<muxc:ItemsRepeater ItemsSource="{Binding Data.Today}"
															ItemTemplate="{StaticResource NotificationTemplate}">
											<muxc:ItemsRepeater.Layout>
												<muxc:StackLayout Orientation="Vertical"
																  Spacing="2" />
											</muxc:ItemsRepeater.Layout>
										</muxc:ItemsRepeater>
									</utu:AutoLayout>

									<!--Yesterday-->
									<utu:AutoLayout Visibility="{Binding Data.HasYesterdayNotifications}"
													Padding="0,16"
													Spacing="16">
										<TextBlock TextWrapping="Wrap" 
													Text="Yesterday"
													Foreground="{ThemeResource OnSurfaceBrush}"
													Style="{StaticResource LabelLarge}" />
										<muxc:ItemsRepeater ItemsSource="{Binding Data.Yesterday}"
															ItemTemplate="{StaticResource NotificationTemplate}">
											<muxc:ItemsRepeater.Layout>
												<muxc:StackLayout Orientation="Vertical"
																  Spacing="2" />
											</muxc:ItemsRepeater.Layout>
										</muxc:ItemsRepeater>
									</utu:AutoLayout>

									<!--Older-->
									<utu:AutoLayout Visibility="{Binding Data.HasOlderNotifications}"
													Padding="0,16"
													Spacing="16">
										<TextBlock TextWrapping="Wrap" 
													Text="Older"
													Foreground="{ThemeResource OnSurfaceBrush}"
													Style="{StaticResource LabelLarge}" />
										<muxc:ItemsRepeater ItemsSource="{Binding Data.Older}"
															ItemTemplate="{StaticResource NotificationTemplate}">
											<muxc:ItemsRepeater.Layout>
												<muxc:StackLayout Orientation="Vertical"
																  Spacing="2" />
											</muxc:ItemsRepeater.Layout>
										</muxc:ItemsRepeater>
									</utu:AutoLayout>
								</utu:AutoLayout>
							</DataTemplate>
						</uer:FeedView>
					</utu:AutoLayout>

					<!--Read-->
					<utu:AutoLayout Padding="16"
									PrimaryAxisAlignment="Stretch"
									utu:AutoLayout.PrimaryAlignment="Stretch"
									uen:Region.Name="ReadTab"
									Visibility="Collapsed">
						<uer:FeedView x:Name="ReadFeed"
										Source="{Binding Read}"
										NoneTemplate="{StaticResource EmptyTemplate}">
							<DataTemplate>
								<utu:AutoLayout>
									<!--Today-->
									<utu:AutoLayout Visibility="{Binding Data.HasTodayNotifications}"
													Padding="0,16"
													Spacing="16">
										<TextBlock TextWrapping="Wrap" 
													Text="Today"
													Foreground="{ThemeResource OnSurfaceBrush}"
													Style="{StaticResource LabelLarge}" />
										<muxc:ItemsRepeater ItemsSource="{Binding Data.Today}"
															ItemTemplate="{StaticResource NotificationTemplate}">
											<muxc:ItemsRepeater.Layout>
												<muxc:StackLayout Orientation="Vertical"
																  Spacing="2" />
											</muxc:ItemsRepeater.Layout>
										</muxc:ItemsRepeater>
									</utu:AutoLayout>

									<!--Yesterday-->
									<utu:AutoLayout Visibility="{Binding Data.HasYesterdayNotifications}"
													Padding="0,16"
													Spacing="16">
										<TextBlock TextWrapping="Wrap" 
												   Text="Yesterday"
												   Foreground="{ThemeResource OnSurfaceBrush}"
												   Style="{StaticResource LabelLarge}" />
										<muxc:ItemsRepeater ItemsSource="{Binding Data.Yesterday}"
															ItemTemplate="{StaticResource NotificationTemplate}">
											<muxc:ItemsRepeater.Layout>
												<muxc:StackLayout Orientation="Vertical"
																	Spacing="2" />
											</muxc:ItemsRepeater.Layout>
										</muxc:ItemsRepeater>
									</utu:AutoLayout>

									<!--Older-->
									<utu:AutoLayout Visibility="{Binding Data.HasOlderNotifications}"
													Padding="0,16"
													Spacing="16">
										<TextBlock TextWrapping="Wrap" 
												   Text="Older"
												   Foreground="{ThemeResource OnSurfaceBrush}"
												   Style="{StaticResource LabelLarge}" />
										<muxc:ItemsRepeater ItemsSource="{Binding Data.Older}"
															ItemTemplate="{StaticResource NotificationTemplate}">
											<muxc:ItemsRepeater.Layout>
												<muxc:StackLayout Orientation="Vertical"
																  Spacing="2" />
											</muxc:ItemsRepeater.Layout>
										</muxc:ItemsRepeater>
									</utu:AutoLayout>
								</utu:AutoLayout>
							</DataTemplate>
						</uer:FeedView>
					</utu:AutoLayout>
				</Grid>
			</ScrollViewer>
		</utu:AutoLayout>
	</utu:AutoLayout>
</Page>
