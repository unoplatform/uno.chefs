<Page x:Class="Chefs.Views.HomePage"
	  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	  xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
	  xmlns:uen="using:Uno.Extensions.Navigation.UI"
	  xmlns:uer="using:Uno.Extensions.Reactive.UI"
	  xmlns:um="using:Uno.Material"
	  xmlns:utu="using:Uno.Toolkit.UI"
	  utu:StatusBar.Background="{ThemeResource SurfaceInverseBrush}"
	  utu:StatusBar.Foreground="AutoInverse"
	  Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
	  NavigationCacheMode="Enabled"
	  mc:Ignorable="d">
	<Page.Resources>
		<DataTemplate x:Key="HomeLargeItemTemplate">
			<utu:CardContentControl Width="328"
									Margin="0"
									CornerRadius="4"
									Style="{StaticResource FilledCardContentControlStyle}">
				<utu:AutoLayout HorizontalAlignment="Stretch"
								Background="{ThemeResource SurfaceBrush}"
								CornerRadius="4"
								PrimaryAxisAlignment="Center">
					<utu:AutoLayout CornerRadius="4">
						<Border Height="144">
							<Image HorizontalAlignment="Center"
								   VerticalAlignment="Center"
								   Source="{Binding ImageUrl}"
								   Stretch="UniformToFill" />
						</Border>
						<utu:AutoLayout Padding="16"
										Orientation="Horizontal"
										Spacing="16">
							<utu:AutoLayout utu:AutoLayout.CounterAlignment="Center"
											utu:AutoLayout.PrimaryAlignment="Stretch">
								<utu:AutoLayout PrimaryAxisAlignment="Center"
												Spacing="4">
									<TextBlock Foreground="{ThemeResource OnSurfaceBrush}"
											   Style="{StaticResource TitleSmall}"
											   Text="{Binding Name}"
											   TextWrapping="Wrap" />
									<TextBlock Foreground="{ThemeResource OnSurfaceLowBrush}"
											   Style="{StaticResource CaptionMedium}"
											   Text="{Binding TimeCal}"
											   TextWrapping="Wrap" />
								</utu:AutoLayout>
							</utu:AutoLayout>
							<ToggleButton utu:AutoLayout.CounterAlignment="Center"
										  Command="{utu:AncestorBinding AncestorType=uer:FeedView,
																		Path=DataContext.SaveRecipe}"
										  CommandParameter="{Binding}"
										  IsChecked="{Binding Save, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
										  Style="{StaticResource IconToggleButtonStyle}">
								<ToggleButton.Content>
									<PathIcon Data="{StaticResource Icon_Favorite_Border}"
											  Foreground="{ThemeResource OnSurfaceBrush}" />
								</ToggleButton.Content>
								<um:ControlExtensions.AlternateContent>
									<PathIcon Data="{StaticResource Icon_Favorite_Filled}"
											  Foreground="{ThemeResource PrimaryBrush}" />
								</um:ControlExtensions.AlternateContent>
							</ToggleButton>
						</utu:AutoLayout>
					</utu:AutoLayout>
				</utu:AutoLayout>
			</utu:CardContentControl>
		</DataTemplate>
	</Page.Resources>
	<utu:AutoLayout Background="{ThemeResource BackgroundBrush}">
		<utu:AutoLayout utu:AutoLayout.PrimaryAlignment="Stretch">
			<utu:NavigationBar x:Name="NavBar"
							   Background="{ThemeResource SurfaceInverseBrush}"
							   Foreground="{ThemeResource OnSurfaceInverseBrush}">
				<utu:NavigationBar.Content>
					<utu:AutoLayout Padding="12,0,0,0"
									Orientation="Horizontal">
						<PathIcon utu:AutoLayout.CounterAlignment="Center"
								  Data="{StaticResource Icon_ChefsAppSignature}"
								  Foreground="{ThemeResource OnSurfaceInverseBrush}" />
					</utu:AutoLayout>
				</utu:NavigationBar.Content>
				<utu:NavigationBar.PrimaryCommands>
					<AppBarButton Command="{Binding ShowCurrentProfile}"
								  Foreground="{ThemeResource OnSurfaceInverseBrush}">
						<AppBarButton.Icon>
							<BitmapIcon UriSource="ms-appx:///Chefs/Assets/Icons/user_profile.png" />
						</AppBarButton.Icon>
					</AppBarButton>
					<AppBarButton Command="{Binding ShowNotifications}"
								  Foreground="{ThemeResource OnSurfaceInverseBrush}">
						<AppBarButton.Icon>
							<BitmapIcon UriSource="ms-appx:///Chefs/Assets/Icons/notification.png" />
						</AppBarButton.Icon>
					</AppBarButton>
				</utu:NavigationBar.PrimaryCommands>
			</utu:NavigationBar>
			<ScrollViewer utu:AutoLayout.PrimaryAlignment="Stretch">
				<utu:AutoLayout Padding="0,0,0,16"
								Background="{ThemeResource BackgroundBrush}"
								Spacing="16">

					<utu:AutoLayout Padding="16,16,16,0"
									Justify="SpaceBetween"
									Orientation="Horizontal">
						<TextBlock utu:AutoLayout.CounterAlignment="Center"
								   Style="{StaticResource TitleMedium}"
								   Text="Trending Now" />
						<Button HorizontalContentAlignment="Center"
								VerticalContentAlignment="Center"
								utu:AutoLayout.CounterAlignment="Center"
								Command="{Binding ShowAll}"
								Content="View all"
								CornerRadius="20"
								Foreground="{ThemeResource PrimaryBrush}"
								Style="{StaticResource TextButtonStyle}" />
					</utu:AutoLayout>

					<uer:FeedView x:Name="TrendingNowFeed"
								  Source="{Binding TrendingNow}">
						<DataTemplate>
							<ScrollViewer Padding="16,4"
										  utu:AutoLayout.PrimaryAlignment="Stretch"
										  HorizontalScrollBarVisibility="Auto"
										  HorizontalScrollMode="Auto"
										  VerticalScrollBarVisibility="Disabled"
										  VerticalScrollMode="Disabled">
								<muxc:ItemsRepeater uen:Navigation.Data="{Binding Data}"
													uen:Navigation.Request="RecipeDetails"
													ItemTemplate="{StaticResource HomeLargeItemTemplate}"
													ItemsSource="{Binding Data}">
									<muxc:ItemsRepeater.Layout>
										<muxc:StackLayout Orientation="Horizontal"
														  Spacing="8" />
									</muxc:ItemsRepeater.Layout>
								</muxc:ItemsRepeater>
							</ScrollViewer>
						</DataTemplate>
					</uer:FeedView>

					<utu:AutoLayout Padding="16,16,16,0"
									Justify="SpaceBetween"
									Orientation="Horizontal">
						<TextBlock utu:AutoLayout.CounterAlignment="Center"
								   Style="{StaticResource TitleMedium}"
								   Text="Categories" />
					</utu:AutoLayout>
					<uer:FeedView x:Name="CategoriesFeedView"
								  Source="{Binding Categories}">
						<DataTemplate>
							<ScrollViewer Padding="16,4"
										  utu:AutoLayout.PrimaryAlignment="Stretch"
										  HorizontalScrollBarVisibility="Auto"
										  HorizontalScrollMode="Auto"
										  VerticalScrollBarVisibility="Disabled"
										  VerticalScrollMode="Disabled">
								<muxc:ItemsRepeater utu:CommandExtensions.Command="{Binding Parent.CategorySearch}"
													ItemsSource="{Binding Data}">
									<muxc:ItemsRepeater.Layout>
										<muxc:StackLayout Orientation="Horizontal"
														  Spacing="8" />
									</muxc:ItemsRepeater.Layout>
									<muxc:ItemsRepeater.ItemTemplate>
										<DataTemplate>
											<utu:AutoLayout Background="{ThemeResource SurfaceBrush}"
															CornerRadius="4">
												<utu:AutoLayout Padding="8,0,16,0"
																utu:AutoLayout.CounterAlignment="Start"
																Orientation="Horizontal"
																Spacing="8">
													<Image Width="60"
														   Height="60"
														   utu:AutoLayout.CounterAlignment="Center"
														   Source="{Binding UrlIcon}" />
													<utu:AutoLayout utu:AutoLayout.CounterAlignment="Center"
																	PrimaryAxisAlignment="Center">
														<TextBlock utu:AutoLayout.CounterAlignment="Start"
																   Foreground="{ThemeResource OnSurfaceBrush}"
																   Style="{StaticResource TitleMedium}"
																   Text="{Binding Name}" />
														<TextBlock utu:AutoLayout.CounterAlignment="Start"
																   Foreground="{ThemeResource OnSurfaceMediumBrush}"
																   Text="164 recipes" />
													</utu:AutoLayout>
												</utu:AutoLayout>
											</utu:AutoLayout>
										</DataTemplate>
									</muxc:ItemsRepeater.ItemTemplate>
								</muxc:ItemsRepeater>
							</ScrollViewer>
						</DataTemplate>
					</uer:FeedView>

					<utu:AutoLayout Padding="16,16,16,0"
									Justify="SpaceBetween"
									Orientation="Horizontal">
						<TextBlock utu:AutoLayout.CounterAlignment="Center"
								   Style="{StaticResource TitleMedium}"
								   Text="Recently Added" />
						<Button HorizontalContentAlignment="Center"
								VerticalContentAlignment="Center"
								utu:AutoLayout.CounterAlignment="Center"
								Command="{Binding ShowAllRecentlyAdded}"
								Content="View all"
								CornerRadius="20"
								Foreground="{ThemeResource PrimaryBrush}"
								Style="{StaticResource TextButtonStyle}" />
					</utu:AutoLayout>
					<uer:FeedView x:Name="RecentlyAddedFeedView"
								  Source="{Binding RecentlyAdded}">
						<DataTemplate>
							<ScrollViewer Padding="16,4"
										  utu:AutoLayout.PrimaryAlignment="Stretch"
										  HorizontalScrollBarVisibility="Auto"
										  HorizontalScrollMode="Auto"
										  VerticalScrollBarVisibility="Disabled"
										  VerticalScrollMode="Disabled">
								<muxc:ItemsRepeater uen:Navigation.Data="{Binding Data}"
													uen:Navigation.Request="RecipeDetails"
													ItemsSource="{Binding Data}">
									<muxc:ItemsRepeater.Layout>
										<muxc:StackLayout Orientation="Horizontal"
														  Spacing="8" />
									</muxc:ItemsRepeater.Layout>
									<muxc:ItemsRepeater.ItemTemplate>
										<DataTemplate>
											<utu:CardContentControl Width="160"
																	Margin="0"
																	CornerRadius="4"
																	Style="{StaticResource FilledCardContentControlStyle}">
												<utu:AutoLayout HorizontalAlignment="Stretch"
																Background="{ThemeResource SurfaceBrush}"
																CornerRadius="4"
																PrimaryAxisAlignment="Center">
													<utu:AutoLayout CornerRadius="4">
														<Image Height="144"
															   Source="{Binding ImageUrl}"
															   Stretch="UniformToFill" />
														<utu:AutoLayout Padding="16"
																		PrimaryAxisAlignment="Center"
																		Spacing="4">
															<TextBlock Foreground="{ThemeResource OnSurfaceBrush}"
																	   Style="{StaticResource TitleSmall}"
																	   Text="{Binding Name}"
																	   TextWrapping="NoWrap" />
															<TextBlock Foreground="{ThemeResource OnSurfaceLowBrush}"
																	   Style="{StaticResource CaptionMedium}"
																	   Text="{Binding Calories}"
																	   TextWrapping="Wrap" />
														</utu:AutoLayout>
													</utu:AutoLayout>
												</utu:AutoLayout>
											</utu:CardContentControl>
										</DataTemplate>
									</muxc:ItemsRepeater.ItemTemplate>
								</muxc:ItemsRepeater>
							</ScrollViewer>
						</DataTemplate>
					</uer:FeedView>

					<utu:AutoLayout Padding="16,16,16,0"
									Justify="SpaceBetween"
									Orientation="Horizontal">
						<TextBlock utu:AutoLayout.CounterAlignment="Center"
								   Style="{StaticResource TitleMedium}"
								   Text="Popular Contributors" />

						<Button HorizontalContentAlignment="Center"
								VerticalContentAlignment="Center"
								uen:Navigation.Request="Map"
								utu:AutoLayout.CounterAlignment="Center"
								Content="Near me"
								CornerRadius="20"
								Foreground="{ThemeResource PrimaryBrush}"
								Style="{StaticResource TextButtonStyle}" />
					</utu:AutoLayout>
					<uer:FeedView x:Name="PopularCreatorsFeedView"
								  Source="{Binding PopularCreators}">
						<DataTemplate>
							<ScrollViewer Padding="16,4"
										  utu:AutoLayout.PrimaryAlignment="Stretch"
										  HorizontalScrollBarVisibility="Auto"
										  HorizontalScrollMode="Auto"
										  VerticalScrollBarVisibility="Disabled"
										  VerticalScrollMode="Disabled">
								<muxc:ItemsRepeater utu:CommandExtensions.Command="{Binding Parent.ShowProfile}"
													ItemsSource="{Binding Data}">
									<muxc:ItemsRepeater.Layout>
										<muxc:StackLayout Orientation="Horizontal"
														  Spacing="16" />
									</muxc:ItemsRepeater.Layout>
									<muxc:ItemsRepeater.ItemTemplate>
										<DataTemplate>
											<utu:CardContentControl Margin="0"
																	Style="{StaticResource FilledCardContentControlStyle}">
												<utu:AutoLayout Background="{ThemeResource BackgroundBrush}"
																PrimaryAxisAlignment="Center">
													<utu:AutoLayout Padding="10,8"
																	utu:AutoLayout.CounterAlignment="Center"
																	CornerRadius="12"
																	Orientation="{utu:Responsive Narrow=Vertical,
																								 Wide=Horizontal}"
																	Spacing="8">
														<Border Width="96"
																Height="96"
																utu:AutoLayout.CounterAlignment="Center"
																CornerRadius="80">
															<Image Source="{Binding UrlProfileImage}"
																   Stretch="UniformToFill" />
														</Border>
														<utu:AutoLayout PrimaryAxisAlignment="Center"
																		Spacing="4">
															<TextBlock Foreground="{ThemeResource OnSurfaceBrush}"
																	   Style="{StaticResource TitleSmall}"
																	   Text="{Binding FullName}"
																	   TextAlignment="{utu:Responsive Narrow=Center,
																									  Wide=Start}"
																	   TextWrapping="Wrap" />

															<TextBlock Foreground="{ThemeResource OnSurfaceLowBrush}"
																	   Style="{StaticResource LabelMedium}"
																	   Text="{Binding Recipes, Converter={StaticResource StringFormatter}, ConverterParameter='{}{0} recipes'}"
																	   TextAlignment="{utu:Responsive Narrow=Center,
																									  Wide=Start}"
																	   TextWrapping="Wrap" />
														</utu:AutoLayout>
													</utu:AutoLayout>
												</utu:AutoLayout>
											</utu:CardContentControl>
										</DataTemplate>
									</muxc:ItemsRepeater.ItemTemplate>
								</muxc:ItemsRepeater>
							</ScrollViewer>
						</DataTemplate>
					</uer:FeedView>

					<utu:AutoLayout Padding="16,16,16,0"
									Justify="SpaceBetween"
									Orientation="Horizontal">
						<TextBlock utu:AutoLayout.CounterAlignment="Center"
								   Style="{StaticResource TitleMedium}"
								   Text="Lunch" />
						<Button HorizontalContentAlignment="Center"
								VerticalContentAlignment="Center"
								utu:AutoLayout.CounterAlignment="Center"
								Command="{Binding ShowAllLunch}"
								Content="View all"
								CornerRadius="20"
								Foreground="{ThemeResource PrimaryBrush}"
								Style="{StaticResource TextButtonStyle}" />
					</utu:AutoLayout>
					<uer:FeedView x:Name="LunchRecipesFeedView"
								  Source="{Binding LunchRecipes}">
						<DataTemplate>
							<ScrollViewer Padding="16,4"
										  utu:AutoLayout.PrimaryAlignment="Stretch"
										  HorizontalScrollBarVisibility="Auto"
										  HorizontalScrollMode="Auto"
										  VerticalScrollBarVisibility="Disabled"
										  VerticalScrollMode="Disabled">
								<muxc:ItemsRepeater uen:Navigation.Request="RecipeDetails"
													ItemTemplate="{StaticResource HomeLargeItemTemplate}"
													ItemsSource="{Binding Data}">
									<muxc:ItemsRepeater.Layout>
										<muxc:StackLayout Orientation="Horizontal"
														  Spacing="8" />
									</muxc:ItemsRepeater.Layout>
								</muxc:ItemsRepeater>
							</ScrollViewer>
						</DataTemplate>
					</uer:FeedView>

					<utu:AutoLayout Padding="16,16,16,0"
									Justify="SpaceBetween"
									Orientation="Horizontal">
						<TextBlock utu:AutoLayout.CounterAlignment="Center"
								   Style="{StaticResource TitleMedium}"
								   Text="Snack" />
						<Button HorizontalContentAlignment="Center"
								VerticalContentAlignment="Center"
								utu:AutoLayout.CounterAlignment="Center"
								Command="{Binding ShowAllSnack}"
								Content="View all"
								CornerRadius="20"
								Foreground="{ThemeResource PrimaryBrush}"
								Style="{StaticResource TextButtonStyle}" />
					</utu:AutoLayout>
					<uer:FeedView x:Name="SnackRecipesFeedView"
								  Source="{Binding SnackRecipes}">
						<DataTemplate>
							<ScrollViewer Padding="16,4"
										  utu:AutoLayout.PrimaryAlignment="Stretch"
										  HorizontalScrollBarVisibility="Auto"
										  HorizontalScrollMode="Auto"
										  VerticalScrollBarVisibility="Disabled"
										  VerticalScrollMode="Disabled">
								<muxc:ItemsRepeater uen:Navigation.Request="RecipeDetails"
													ItemTemplate="{StaticResource HomeLargeItemTemplate}"
													ItemsSource="{Binding Data}">
									<muxc:ItemsRepeater.Layout>
										<muxc:StackLayout Orientation="Horizontal"
														  Spacing="8" />
									</muxc:ItemsRepeater.Layout>
								</muxc:ItemsRepeater>
							</ScrollViewer>
						</DataTemplate>
					</uer:FeedView>

					<utu:AutoLayout Padding="16,16,16,0"
									Justify="SpaceBetween"
									Orientation="Horizontal">
						<TextBlock utu:AutoLayout.CounterAlignment="Center"
								   Style="{StaticResource TitleMedium}"
								   Text="Your Favorite" />
					</utu:AutoLayout>

					<uer:FeedView Source="{Binding SavedRecipes}">
						<DataTemplate>
							<ScrollViewer Padding="16,4"
										  utu:AutoLayout.PrimaryAlignment="Stretch"
										  HorizontalScrollBarVisibility="Auto"
										  HorizontalScrollMode="Auto"
										  VerticalScrollBarVisibility="Disabled"
										  VerticalScrollMode="Disabled">
								<muxc:ItemsRepeater uen:Navigation.Request="RecipeDetails"
													ItemTemplate="{StaticResource HomeLargeItemTemplate}"
													ItemsSource="{Binding Data}">
									<muxc:ItemsRepeater.Layout>
										<muxc:StackLayout Orientation="Horizontal"
														  Spacing="8" />
									</muxc:ItemsRepeater.Layout>
								</muxc:ItemsRepeater>
							</ScrollViewer>
						</DataTemplate>
					</uer:FeedView>
				</utu:AutoLayout>
			</ScrollViewer>
		</utu:AutoLayout>
	</utu:AutoLayout>
</Page>
