<Page x:Class="Chefs.Views.SavedRecipesPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:Chefs.Views"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:utu="using:Uno.Toolkit.UI"
      xmlns:uen="using:Uno.Extensions.Navigation.UI"
      xmlns:uer="using:Uno.Extensions.Reactive.UI"
      xmlns:um="using:Uno.Material"
      xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
      xmlns:controls="using:Chefs.Controls"
      x:Name="Root"
      mc:Ignorable="d"
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    <Page.Resources>
        <ResourceDictionary>
            <x:String x:Key="Icon_Add">F1 M 16 9.142857142857142 L 9.142857142857142 9.142857142857142 L 9.142857142857142 16 L 6.857142857142857 16 L 6.857142857142857 9.142857142857142 L 0 9.142857142857142 L 0 6.857142857142857 L 6.857142857142857 6.857142857142857 L 6.857142857142857 0 L 9.142857142857142 0 L 9.142857142857142 6.857142857142857 L 16 6.857142857142857 L 16 9.142857142857142 Z</x:String>
            <DataTemplate x:Key="CookbookTemplate">
                <UserControl>
                    <utu:AutoLayout>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup>
                                <VisualState x:Name="Narrow" />
                                <VisualState x:Name="Wide">
                                    <VisualState.StateTriggers>
                                        <AdaptiveTrigger MinWindowWidth="800" />
                                    </VisualState.StateTriggers>
                                    <VisualState.Setters>
                                        <Setter Target="CookbookTemplateCard.Background"
                                                Value="{ThemeResource SurfaceBrush}" />
                                        <Setter Target="CookbookTemplateCard.MaxWidth"
                                                Value="400" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <!-- Using a custom local FixedCardContentControl as a workaround for now regarding this WinUI issue: -->
                        <!-- https://github.com/unoplatform/uno.chefs/issues/144#issuecomment-1400665013 -->
                        <!-- (For this workaround to be able to work we need to stretch the control and change the MinHeight/MaxWidth values) -->
                        <controls:FixedSizeCardContentControl x:Name="CookbookTemplateCard"
                                                              HorizontalAlignment="Stretch"
                                                              VerticalAlignment="Stretch"
                                                              MinHeight="0"
                                                              MaxWidth="400"
                                                              Style="{StaticResource FilledCardContentControlStyle}"
                                                              Background="{ThemeResource BackgroundBrush}">
                            <controls:FixedSizeCardContentControl.ContentTemplate>
                                <DataTemplate>
                                    <UserControl>
                                        <utu:AutoLayout>
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup>
                                                    <VisualState x:Name="Narrow" />
                                                    <VisualState x:Name="Wide">
                                                        <VisualState.StateTriggers>
                                                            <AdaptiveTrigger MinWindowWidth="800" />
                                                        </VisualState.StateTriggers>
                                                        <VisualState.Setters>
                                                            <Setter Target="ImagesLayout.Height"
                                                                    Value="180" />
                                                            <Setter Target="ButtonIcon.Margin"
                                                                    Value="12,5,0,0" />
                                                        </VisualState.Setters>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <utu:AutoLayout x:Name="ImagesLayout"
                                                            utu:AutoLayout.CounterAlignment="Stretch"
                                                            Spacing="8"
                                                            Orientation="Horizontal"
                                                            Height="122">
                                                <utu:AutoLayout utu:AutoLayout.PrimaryAlignment="Stretch"
                                                                CornerRadius="12">
                                                    <Image Source="{Binding CookbookImages.FirstImage}"
                                                           utu:AutoLayout.CounterAlignment="Stretch"
                                                           utu:AutoLayout.PrimaryAlignment="Stretch"
                                                           Stretch="UniformToFill" />
                                                </utu:AutoLayout>
                                                <utu:AutoLayout Spacing="8"
                                                                utu:AutoLayout.PrimaryAlignment="Stretch"
                                                                utu:AutoLayout.CounterAlignment="Stretch">
                                                    <utu:AutoLayout CornerRadius="12"
                                                                    Background="{ThemeResource SurfaceVariantColor}"
                                                                    utu:AutoLayout.CounterAlignment="Stretch"
                                                                    utu:AutoLayout.PrimaryAlignment="Stretch">
                                                        <Image Source="{Binding CookbookImages.SecondImage}"
                                                               Visibility="{Binding CookbookImages.SecondImage,
                                                                      Converter={StaticResource NullToCollapsed}}"
                                                               Stretch="UniformToFill" />
                                                    </utu:AutoLayout>
                                                    <utu:AutoLayout CornerRadius="12"
                                                                    utu:AutoLayout.CounterAlignment="Stretch"
                                                                    utu:AutoLayout.PrimaryAlignment="Stretch">
                                                        <utu:AutoLayout Visibility="{Binding CookbookImages.ThirdImage,
                                                                                Converter={StaticResource NullToCollapsed}}"
                                                                        utu:AutoLayout.CounterAlignment="Stretch">
                                                            <Image Source="{Binding CookbookImages.ThirdImage}"
                                                                   Stretch="UniformToFill" />
                                                        </utu:AutoLayout>
                                                        <utu:AutoLayout utu:AutoLayout.PrimaryAlignment="Stretch"
                                                                        utu:AutoLayout.CounterAlignment="Stretch"
                                                                        Visibility="{Binding CookbookImages.ThirdImage,
                                                                                Converter={StaticResource  NullToVisible}}">
                                                            <Button uen:Navigation.Request="SavedUpdateCookbook"
                                                                    uen:Navigation.Data="{Binding}"
                                                                    Background="{ThemeResource SurfaceVariantColor}"
                                                                    utu:AutoLayout.CounterAlignment="Stretch"
                                                                    utu:AutoLayout.PrimaryAlignment="Stretch"
                                                                    HorizontalAlignment="Stretch"
                                                                    CornerRadius="12"
                                                                    Style="{StaticResource ElevatedButtonStyle}"
                                                                    MinHeight="57">
                                                                <um:ControlExtensions.Icon>
                                                                    <PathIcon x:Name="ButtonIcon"
                                                                              Margin="12,1,0,0"
                                                                              utu:AutoLayout.CounterAlignment="Stretch"
                                                                              Data="{StaticResource Icon_Add}"
                                                                              Foreground="{ThemeResource PrimaryBrush}" />
                                                                </um:ControlExtensions.Icon>
                                                            </Button>
                                                        </utu:AutoLayout>
                                                    </utu:AutoLayout>
                                                </utu:AutoLayout>
                                            </utu:AutoLayout>
                                            <utu:AutoLayout Spacing="2"
                                                            Padding="10"
                                                            PrimaryAxisAlignment="Center">
                                                <TextBlock Foreground="{ThemeResource OnSurfaceBrush}"
                                                           TextWrapping="NoWrap"
                                                           Text="{Binding Name}"
                                                           Style="{StaticResource TitleMedium}" />
                                                <TextBlock Foreground="{ThemeResource OnSurfaceVariantBrush}"
                                                           TextWrapping="NoWrap"
                                                           Text="{Binding PinsNumber, 
                                                                Converter={StaticResource StringFormatter}, 
                                                                ConverterParameter='{}{0} pins'}"
                                                           Style="{StaticResource BodySmall}" />
                                            </utu:AutoLayout>
                                        </utu:AutoLayout>
                                    </UserControl>
                                </DataTemplate>
                            </controls:FixedSizeCardContentControl.ContentTemplate>
                        </controls:FixedSizeCardContentControl>
                    </utu:AutoLayout>
                </UserControl>
            </DataTemplate>

            <DataTemplate x:Key="RecipeTemplate">
                <UserControl>
                    <utu:AutoLayout>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup>
                                <VisualState x:Name="Narrow" />
                                <VisualState x:Name="Wide">
                                    <VisualState.StateTriggers>
                                        <AdaptiveTrigger MinWindowWidth="800" />
                                    </VisualState.StateTriggers>
                                    <VisualState.Setters>
                                        <Setter Target="RecipeTemplateCard.MaxWidth"
                                                Value="400" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <!-- Using a custom local FixedCardContentControl as a workaround for now regarding this WinUI issue: -->
                        <!-- https://github.com/unoplatform/uno.chefs/issues/144#issuecomment-1400665013 -->
                        <!-- (For this workaround to be able to work we need to stretch the control and change the MinHeight/MaxWidth values) -->
                        <controls:FixedSizeCardContentControl x:Name="RecipeTemplateCard"
                                                              Style="{StaticResource FilledCardContentControlStyle}"
                                                              Background="{ThemeResource SurfaceBrush}"
                                                              HorizontalAlignment="Stretch"
                                                              VerticalAlignment="Stretch"
                                                              MinHeight="0"
                                                              MaxWidth="400">
                            <controls:FixedSizeCardContentControl.ContentTemplate>
                                <DataTemplate>
                                    <UserControl>
                                        <utu:AutoLayout Background="{ThemeResource SurfaceBrush}">
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup>
                                                    <VisualState x:Name="Narrow" />
                                                    <VisualState x:Name="Wide">
                                                        <VisualState.StateTriggers>
                                                            <AdaptiveTrigger MinWindowWidth="800" />
                                                        </VisualState.StateTriggers>
                                                        <VisualState.Setters>
                                                            <Setter Target="ImageLayout.(utu:AutoLayout.PrimaryLength)"
                                                                    Value="180" />
                                                        </VisualState.Setters>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <utu:AutoLayout x:Name="ImageLayout"
                                                            utu:AutoLayout.PrimaryLength="110">
                                                <Image utu:AutoLayout.CounterAlignment="Stretch"
                                                       utu:AutoLayout.PrimaryAlignment="Stretch"
                                                       Source="{Binding ImageUrl}"
                                                       Stretch="UniformToFill" />
                                            </utu:AutoLayout>
                                            <utu:AutoLayout Spacing="2"
                                                            Padding="10"
                                                            PrimaryAxisAlignment="Center">
                                                <TextBlock Foreground="{ThemeResource OnSurfaceBrush}"
                                                           TextWrapping="NoWrap"
                                                           Text="{Binding Name}"
                                                           Style="{StaticResource TitleMedium}" />
                                                <TextBlock Foreground="{ThemeResource OnSurfaceVariantBrush}"
                                                           TextWrapping="NoWrap"
                                                           Text="{Binding TimeCal}"
                                                           Style="{StaticResource BodySmall}" />
                                            </utu:AutoLayout>
                                        </utu:AutoLayout>
                                    </UserControl>
                                </DataTemplate>
                            </controls:FixedSizeCardContentControl.ContentTemplate>
                        </controls:FixedSizeCardContentControl>
                    </utu:AutoLayout>
                </UserControl>
            </DataTemplate>

            <DataTemplate x:Key="RecipeEmptyTemplate">
                <UserControl>
                    <utu:AutoLayout Spacing="10"
                                    PrimaryAxisAlignment="Center">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup>
                                <VisualState x:Name="Narrow" />
                                <VisualState x:Name="Wide">
                                    <VisualState.StateTriggers>
                                        <AdaptiveTrigger MinWindowWidth="800" />
                                    </VisualState.StateTriggers>
                                    <VisualState.Setters>
                                        <Setter Target="Icon.Style"
                                                Value="{StaticResource DisplayLarge}" />
                                        <Setter Target="TitleText.Style"
                                                Value="{StaticResource HeadlineLarge}" />
                                        <Setter Target="DisplayTest.Style"
                                                Value="{StaticResource HeadlineMedium}" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <TextBlock x:Name="Icon"
                                   TextAlignment="Center"
                                   Text="🍽"
                                   utu:AutoLayout.CounterAlignment="Center"
                                   Foreground="{ThemeResource SurfaceInverseBrush}"
                                   Style="{StaticResource DisplayMedium}" />
                        <utu:AutoLayout Spacing="14"
                                        utu:AutoLayout.CounterAlignment="Center">
                            <TextBlock x:Name="TitleText"
                                       TextAlignment="Center"
                                       Text="No recipes"
                                       utu:AutoLayout.CounterAlignment="Center"
                                       Foreground="{ThemeResource SurfaceInverseBrush}"
                                       Style="{StaticResource HeadlineMedium}" />
                            <TextBlock x:Name="DisplayTest"
                                       TextAlignment="Center"
                                       Text="There are no recipes. Please&#xA; start saving your recipes"
                                       utu:AutoLayout.CounterAlignment="Center"
                                       Foreground="{ThemeResource SurfaceInverseBrush}"
                                       Style="{StaticResource HeadlineSmall}" />
                        </utu:AutoLayout>
                    </utu:AutoLayout>
                </UserControl>
            </DataTemplate>

            <DataTemplate x:Key="CookbookEmptyTemplate">
                <UserControl>
                    <utu:AutoLayout Spacing="10"
                                    PrimaryAxisAlignment="Center">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup>
                                <VisualState x:Name="Narrow" />
                                <VisualState x:Name="Wide">
                                    <VisualState.StateTriggers>
                                        <AdaptiveTrigger MinWindowWidth="800" />
                                    </VisualState.StateTriggers>
                                    <VisualState.Setters>
                                        <Setter Target="Icon.Style"
                                                Value="{StaticResource DisplayLarge}" />
                                        <Setter Target="TitleText.Style"
                                                Value="{StaticResource HeadlineLarge}" />
                                        <Setter Target="DisplayTest.Style"
                                                Value="{StaticResource HeadlineMedium}" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <TextBlock x:Name="Icon"
                                   TextAlignment="Center"
                                   Text="📒"
                                   utu:AutoLayout.CounterAlignment="Center"
                                   Foreground="{ThemeResource SurfaceInverseBrush}"
                                   Style="{StaticResource DisplayMedium}" />
                        <utu:AutoLayout Spacing="14"
                                        utu:AutoLayout.CounterAlignment="Center">
                            <TextBlock x:Name="TitleText"
                                       TextAlignment="Center"
                                       Text="No cookbook"
                                       utu:AutoLayout.CounterAlignment="Center"
                                       Foreground="{ThemeResource SurfaceInverseBrush}"
                                       Style="{StaticResource HeadlineMedium}" />
                            <TextBlock x:Name="DisplayTest"
                                       TextAlignment="Center"
                                       Text="There is no cookbook. Please&#xA;create your first cookbook"
                                       utu:AutoLayout.CounterAlignment="Center"
                                       Foreground="{ThemeResource SurfaceInverseBrush}"
                                       Style="{StaticResource HeadlineSmall}" />
                        </utu:AutoLayout>
                    </utu:AutoLayout>
                </UserControl>
            </DataTemplate>
        </ResourceDictionary>
    </Page.Resources>
    <utu:AutoLayout Background="{ThemeResource BackgroundBrush}"
                    utu:AutoLayout.PrimaryAlignment="Stretch">
        <utu:AutoLayout.Resources>
            <x:String x:Key="Icon_Favorite">F1 M 10 18.350000381469727 L 8.550000190734863 17.030000686645508 C 3.4000000953674316 12.360000610351562 0 9.27999997138977 0 5.5 C 0 2.4200000762939453 2.4200000762939453 0 5.5 0 C 7.240000009536743 0 8.909999966621399 0.8100001811981201 10 2.0900001525878906 C 11.090000033378601 0.8100001811981201 12.759999990463257 0 14.5 0 C 17.579999923706055 0 20 2.4200000762939453 20 5.5 C 20 9.27999997138977 16.59999990463257 12.36000108718872 11.449999809265137 17.040000915527344 L 10 18.350000381469727 Z</x:String>
            <x:String x:Key="Icon_Outline_Add_ChefsApp">F0 M 0 10.64285659790039 C 0 4.7878168651035855 4.7878168651035855 0 10.64285659790039 0 C 16.49789755684989 0 21.28571319580078 4.7878168651035855 21.28571319580078 10.64285659790039 C 21.28571319580078 16.49789755684989 16.49789755684989 21.28571319580078 10.64285659790039 21.28571319580078 C 4.7878168651035855 21.28571319580078 0 16.49789755684989 0 10.64285659790039 Z M 10.64285659790039 1.2857142857142856 C 5.497897011893136 1.2857142857142856 1.2857142857142856 5.497897011893136 1.2857142857142856 10.64285659790039 C 1.2857142857142856 15.787816183907644 5.497897011893136 19.999998910086493 10.64285659790039 19.999998910086493 C 15.787816183907644 19.999998910086493 19.999998910086493 15.787816183907644 19.999998910086493 10.64285659790039 C 19.999998910086493 5.497897011893136 15.787816183907644 1.2857142857142856 10.64285659790039 1.2857142857142856 Z M 6 10.642857415335518 C 6 10.287817214216505 6.287816941738128 10.000000272478376 6.642857142857142 10.000000272478376 L 14.642856052943637 10.000000272478376 C 14.99789592197963 10.000000272478376 15.285713195800781 10.287817214216505 15.285713195800781 10.642857415335518 C 15.285713195800781 10.997897616454532 14.99789592197963 11.28571455819266 14.642856052943637 11.28571455819266 L 6.642857142857142 11.28571455819266 C 6.287816941738128 11.28571455819266 6 10.997897616454532 6 10.642857415335518 Z M 10.642857415335518 6 C 10.997897616454532 6 11.28571455819266 6.287816941738128 11.28571455819266 6.642857142857142 L 11.28571455819266 14.642856052943637 C 11.28571455819266 14.99789592197963 10.997897616454532 15.285713195800781 10.642857415335518 15.285713195800781 C 10.287817214216505 15.285713195800781 10.000000272478376 14.99789592197963 10.000000272478376 14.642856052943637 L 10.000000272478376 6.642857142857142 C 10.000000272478376 6.287816941738128 10.287817214216505 6 10.642857415335518 6 Z</x:String>
            <x:String x:Key="Icon_Solid_Saved_ChefsApp">F1 M 10.97964096069336 0.34325098991394043 C 8.249691009521484 -0.11441701650619507 5.447885990142822 -0.11441698670387268 2.7179362773895264 0.3432510495185852 C 1.7205910682678223 0.5104530453681946 0.9263294339179993 1.2761204242706299 0.7263557314872742 2.268893003463745 C -0.189764142036438 6.8169848918914795 -0.2397502064704895 11.497064590454102 0.5790193676948547 16.06368637084961 L 0.9123699069023132 17.92292022705078 C 1.0151575207710266 18.4962100982666 1.7140631675720215 18.72534942626953 2.136324405670166 18.324199676513672 L 6.16003942489624 14.501670837402344 C 6.546004772186279 14.135004043579102 7.1515727043151855 14.135004043579102 7.537538528442383 14.50167179107666 L 11.561253547668457 18.324201583862305 C 11.983514785766602 18.72534942626953 12.682419776916504 18.4962100982666 12.785207748413086 17.92292022705078 L 13.118557929992676 16.06368637084961 C 13.937326431274414 11.497066497802734 13.887340545654297 6.816982984542847 12.971221923828125 2.268893003463745 C 12.771247863769531 1.2761199474334717 11.976985931396484 0.5104529857635498 10.97964096069336 0.34325098991394043 Z</x:String>
        </utu:AutoLayout.Resources>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>
                <VisualState x:Name="Narrow">
                    <VisualState.Setters>
                        <Setter Target="WideSaved.Visibility"
                                Value="Collapsed" />
                    </VisualState.Setters>
                </VisualState>
                <VisualState x:Name="Wide">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="800" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="NarrowTitle.Visibility"
                                Value="Collapsed" />
                        <Setter Target="NarrowSavedRecipes.Visibility"
                                Value="Collapsed" />
                        <Setter Target="WideSaved.Visibility"
                                Value="Visible" />
                        <Setter Target="ContentLayout.Padding"
                                Value="0" />
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <utu:AutoLayout x:Name="ContentLayout"
                        utu:AutoLayout.PrimaryAlignment="Stretch"
                        Padding="18">
            <TextBlock Foreground="{ThemeResource OnSurfaceBrush}"
                       x:Name="NarrowTitle"
                       Text="Saved Recipes"
                       Style="{StaticResource HeadlineMedium}" />
            <Grid utu:AutoLayout.PrimaryAlignment="Stretch">

                <ScrollViewer utu:AutoLayout.PrimaryAlignment="Stretch"
                              VerticalScrollBarVisibility="Hidden"
                              x:Name="NarrowSavedRecipes">
                    <utu:AutoLayout uen:Region.Attached="True"
                                    Spacing="18"
                                    Margin="0, 18, 0, 18"
                                    utu:AutoLayout.PrimaryAlignment="Stretch"
                                    utu:AutoLayout.CounterAlignment="Stretch">
                        <utu:TabBar uen:Region.Attached="True"
                                    Style="{StaticResource TopTabBarStyle}">
                            <utu:TabBarItem Foreground="{ThemeResource OnSurfaceMediumBrush}"
                                            x:Name="TabBarRecipeItem"
                                            IsSelectable="True"
                                            uen:Region.Name="MyRecipes"
                                            Content="All Recipes"
                                            IsSelected="True" />
                            <utu:TabBarItem Foreground="{ThemeResource OnSurfaceMediumBrush}"
                                            uen:Region.Name="Cookbooks"
                                            IsSelectable="True"
                                            Content="Cookbooks" />
                        </utu:TabBar>

                        <Grid uen:Region.Attached="True"
                              uen:Region.Navigator="Visibility"
                              utu:AutoLayout.PrimaryAlignment="Stretch"
                              utu:AutoLayout.CounterAlignment="Stretch">

                            <utu:AutoLayout Visibility="Visible"
                                            utu:AutoLayout.CounterAlignment="Center"
                                            uen:Region.Name="MyRecipes">
                                <uer:FeedView Source="{Binding SavedRecipes}"
                                              NoneTemplate="{StaticResource RecipeEmptyTemplate}">
                                    <DataTemplate>
                                        <muxc:ItemsRepeater ItemsSource="{Binding Data}"
                                                            ItemTemplate="{StaticResource RecipeTemplate}"
                                                            uen:Navigation.Request="SavedRecipeDetails">
                                            <muxc:ItemsRepeater.Layout>
                                                <muxc:UniformGridLayout MaximumRowsOrColumns="2"
                                                                        MinItemWidth="130"
                                                                        MinColumnSpacing="10"
                                                                        MinRowSpacing="10"
                                                                        ItemsStretch="Fill" />
                                            </muxc:ItemsRepeater.Layout>
                                        </muxc:ItemsRepeater>
                                    </DataTemplate>
                                </uer:FeedView>
                            </utu:AutoLayout>
                            <utu:AutoLayout Visibility="Collapsed"
                                            uen:Region.Name="Cookbooks"
                                            utu:AutoLayout.PrimaryAlignment="Stretch"
                                            utu:AutoLayout.CounterAlignment="Stretch">
                                <utu:AutoLayout utu:AutoLayout.CounterAlignment="Start"
                                                utu:AutoLayout.PrimaryAlignment="Stretch">
                                    <uer:FeedView Source="{Binding SavedCookbooks}">
                                        <DataTemplate>
                                            <muxc:ItemsRepeater ItemsSource="{Binding Data}"
                                                                ItemTemplate="{StaticResource CookbookTemplate}"
                                                                uen:Navigation.Request="CookbookDetails">
                                                <muxc:ItemsRepeater.Layout>
                                                    <muxc:UniformGridLayout MaximumRowsOrColumns="2"
                                                                            MinItemWidth="130"
                                                                            MinColumnSpacing="10"
                                                                            MinRowSpacing="10"
                                                                            ItemsStretch="Fill" />
                                                </muxc:ItemsRepeater.Layout>
                                            </muxc:ItemsRepeater>
                                        </DataTemplate>
                                    </uer:FeedView>
                                </utu:AutoLayout>
                                <utu:AutoLayout PrimaryAxisAlignment="End"
                                                utu:AutoLayout.IsIndependentLayout="True"
                                                VerticalAlignment="Bottom"
                                                HorizontalAlignment="Right">
                                    <utu:AutoLayout.Resources>
                                        <x:String x:Key="Floating_Icon_Add">F1 M 16 9.142857142857142 L 9.142857142857142 9.142857142857142 L 9.142857142857142 16 L 6.857142857142857 16 L 6.857142857142857 9.142857142857142 L 0 9.142857142857142 L 0 6.857142857142857 L 6.857142857142857 6.857142857142857 L 6.857142857142857 0 L 9.142857142857142 0 L 9.142857142857142 6.857142857142857 L 16 6.857142857142857 L 16 9.142857142857142 Z</x:String>
                                    </utu:AutoLayout.Resources>
                                    <Button uen:Navigation.Request="CreateCookbook"
                                            utu:AutoLayout.CounterAlignment="End"
                                            CornerRadius="60"
                                            Style="{StaticResource FabStyle}">
                                        <um:ControlExtensions.Icon>
                                            <PathIcon Data="{StaticResource Icon_Add}"
                                                      Foreground="{ThemeResource SurfaceBrush}" />
                                        </um:ControlExtensions.Icon>
                                    </Button>
                                </utu:AutoLayout>
                            </utu:AutoLayout>
                        </Grid>
                    </utu:AutoLayout>
                </ScrollViewer>

                <utu:AutoLayout x:Name="WideSaved"
                                Visibility="Collapsed"
                                Orientation="Horizontal"
                                utu:AutoLayout.PrimaryAlignment="Stretch"
                                utu:AutoLayout.CounterAlignment="Stretch">
                    <utu:AutoLayout utu:AutoLayout.PrimaryAlignment="Stretch">
                        <utu:AutoLayout utu:AutoLayout.PrimaryAlignment="Stretch"
                                        Padding="40,20,40,40"
                                        Spacing="20">
                            <TextBlock Text="All recipes"
                                       Foreground="{ThemeResource SurfaceInverseBrush}"
                                       Style="{StaticResource HeadlineLarge}" />
                            <ScrollViewer x:Name="RecipesScrollViewer"
                                          utu:AutoLayout.PrimaryAlignment="Stretch"
                                          HorizontalScrollMode="Disabled"
                                          VerticalScrollBarVisibility="Hidden">
                                <utu:AutoLayout utu:AutoLayout.CounterAlignment="Center">
                                    <utu:AutoLayout>
                                        <uer:FeedView Source="{Binding SavedRecipes}"
                                                      NoneTemplate="{StaticResource RecipeEmptyTemplate}">
                                            <DataTemplate>
                                                <muxc:ItemsRepeater ItemsSource="{Binding Data}"
                                                                    ItemTemplate="{StaticResource RecipeTemplate}"
                                                                    uen:Navigation.Request="SavedRecipeDetails">
                                                    <muxc:ItemsRepeater.Layout>
                                                        <muxc:UniformGridLayout MaximumRowsOrColumns="2"
                                                                                MinColumnSpacing="20"
                                                                                ItemsStretch="Fill"
                                                                                MinItemWidth="200" />
                                                    </muxc:ItemsRepeater.Layout>
                                                </muxc:ItemsRepeater>
                                            </DataTemplate>
                                        </uer:FeedView>
                                    </utu:AutoLayout>
                                </utu:AutoLayout>
                            </ScrollViewer>
                        </utu:AutoLayout>
                    </utu:AutoLayout>
                    <utu:AutoLayout utu:AutoLayout.PrimaryAlignment="Stretch"
                                    Background="{ThemeResource SurfaceBrush}">
                        <utu:AutoLayout utu:AutoLayout.PrimaryAlignment="Stretch"
                                        Padding="40,20,40,40"
                                        Spacing="20">
                            <TextBlock Text="Cookbooks"
                                       Foreground="{ThemeResource SurfaceInverseBrush}"
                                       Style="{StaticResource HeadlineLarge}" />
                            <ScrollViewer x:Name="CookbooksScrollViewer"
                                          utu:AutoLayout.PrimaryAlignment="Stretch"
                                          HorizontalScrollMode="Disabled"
                                          VerticalScrollBarVisibility="Hidden">
                                <utu:AutoLayout utu:AutoLayout.CounterAlignment="Center">
                                    <utu:AutoLayout utu:AutoLayout.CounterAlignment="Center">
                                        <uer:FeedView Source="{Binding SavedCookbooks}"
                                                      NoneTemplate="{StaticResource CookbookEmptyTemplate}">
                                            <DataTemplate>
                                                <muxc:ItemsRepeater ItemsSource="{Binding Data}"
                                                                    ItemTemplate="{StaticResource CookbookTemplate}"
                                                                    uen:Navigation.Request="CookbookDetails">
                                                    <muxc:ItemsRepeater.Layout>
                                                        <muxc:UniformGridLayout MaximumRowsOrColumns="2"
                                                                                MinColumnSpacing="20"
                                                                                ItemsStretch="Fill"
                                                                                MinItemWidth="200" />
                                                    </muxc:ItemsRepeater.Layout>
                                                </muxc:ItemsRepeater>

                                            </DataTemplate>
                                        </uer:FeedView>
                                    </utu:AutoLayout>
                                </utu:AutoLayout>

                            </ScrollViewer>
                        </utu:AutoLayout>
                    </utu:AutoLayout>
                    <utu:AutoLayout PrimaryAxisAlignment="End"
                                    Orientation="Horizontal"
                                    utu:AutoLayout.IsIndependentLayout="True"
                                    VerticalAlignment="Bottom"
                                    HorizontalAlignment="Right"
                                    Margin="18">
                        <Button uen:Navigation.Request="CreateCookbook"
                                utu:AutoLayout.CounterAlignment="End"
                                CornerRadius="60"
                                Style="{StaticResource FabStyle}">
                            <um:ControlExtensions.Icon>
                                <PathIcon Data="{StaticResource Icon_Add}"
                                          Foreground="{ThemeResource SurfaceBrush}" />
                            </um:ControlExtensions.Icon>
                        </Button>
                    </utu:AutoLayout>
                </utu:AutoLayout>
            </Grid>
        </utu:AutoLayout>
    </utu:AutoLayout>
</Page>
