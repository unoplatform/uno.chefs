<Page
    x:Class="Chefs.Views.ProfilePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Chefs.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:uer="using:Uno.Extensions.Reactive.UI"
    xmlns:utu="using:Uno.Toolkit.UI"
    xmlns:uen="using:Uno.Extensions.Navigation.UI"
    xmlns:um="using:Uno.Material"
    mc:Ignorable="d"
    x:Name="Root"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid>
        <utu:AutoLayout Background="{ThemeResource BackgroundBrush}">
            <utu:AutoLayout.Resources>
                <x:String x:Key="Icon_Add">F1 M 16 9.142857142857142 L 9.142857142857142 9.142857142857142 L 9.142857142857142 16 L 6.857142857142857 16 L 6.857142857142857 9.142857142857142 L 0 9.142857142857142 L 0 6.857142857142857 L 6.857142857142857 6.857142857142857 L 6.857142857142857 0 L 9.142857142857142 0 L 9.142857142857142 6.857142857142857 L 16 6.857142857142857 L 16 9.142857142857142 Z</x:String>
                <x:String x:Key="BitmapIcon_Close">F1 M 14 1.4099998474121094 L 12.59000015258789 0 L 7 5.590000152587891 L 1.4099998474121094 0 L 0 1.4099998474121094 L 5.590000152587891 7 L 0 12.59000015258789 L 1.4099998474121094 14 L 7 8.40999984741211 L 12.59000015258789 14 L 14 12.59000015258789 L 8.40999984741211 7 L 14 1.4099998474121094 Z</x:String>
            </utu:AutoLayout.Resources>
            <utu:AutoLayout utu:AutoLayout.PrimaryAlignment="Stretch">
                <utu:NavigationBar Style="{StaticResource NavigationBarStyle}">
                    <utu:NavigationBar.MainCommand>
                        <AppBarButton Command="{Binding DoSettingsNavigation}" 
                                      Visibility="{Binding IsMyProfile}" 
                                      Foreground="{ThemeResource OnSurfaceInverseBrush}">
                            <AppBarButton.Icon>
                                <SymbolIcon Symbol="Back" />
                            </AppBarButton.Icon>
                        </AppBarButton>
                    </utu:NavigationBar.MainCommand>
                    <utu:NavigationBar.PrimaryCommands>
                        <AppBarButton Command="{Binding DoExit}">
                            <AppBarButton.Icon>
                                <PathIcon Data="{StaticResource BitmapIcon_Close}">
                                    <PathIcon.Resources>
                                        <x:String x:Key="BitmapIcon_Close">F1 M 14 1.4099998474121094 L 12.59000015258789 0 L 7 5.590000152587891 L 1.4099998474121094 0 L 0 1.4099998474121094 L 5.590000152587891 7 L 0 12.59000015258789 L 1.4099998474121094 14 L 7 8.40999984741211 L 12.59000015258789 14 L 14 12.59000015258789 L 8.40999984741211 7 L 14 1.4099998474121094 Z</x:String>
                                    </PathIcon.Resources>
                                </PathIcon>
                            </AppBarButton.Icon>
                        </AppBarButton>
                    </utu:NavigationBar.PrimaryCommands>
                </utu:NavigationBar>
                <uer:FeedView Source="{Binding Profile}">
                    <DataTemplate>
                        <utu:AutoLayout Background="{ThemeResource SurfaceBrush}" Spacing="16" Padding="0,0,0,24" CornerRadius="0,0,30,30" PrimaryAxisAlignment="Center">
                            <utu:AutoLayout CornerRadius="15" utu:AutoLayout.CounterAlignment="Center">
                                <utu:AutoLayout CornerRadius="15" Orientation="Horizontal" utu:AutoLayout.CounterAlignment="Start">
                                    <Border CornerRadius="15" utu:AutoLayout.CounterAlignment="Start" utu:AutoLayout.PrimaryLength="60" utu:AutoLayout.CounterLength="60">
                                        <Image Source="{Binding Data.UrlProfileImage}" Stretch="UniformToFill" />
                                    </Border>
                                </utu:AutoLayout>
                            </utu:AutoLayout>
                            <utu:AutoLayout Spacing="5" PrimaryAxisAlignment="Center" utu:AutoLayout.CounterAlignment="Center" utu:AutoLayout.CounterLength="390">
                                <TextBlock Foreground="{ThemeResource SurfaceInverseBrush}" Text="{Binding Data.FullName}" utu:AutoLayout.CounterAlignment="Center" Style="{StaticResource HeadlineMedium}" />
                                <TextBlock Foreground="{ThemeResource OnSurfaceVariantBrush}" TextAlignment="Center" Text="{Binding Data.Description}" utu:AutoLayout.CounterAlignment="Center" Style="{StaticResource TitleSmall}" />
                            </utu:AutoLayout>
                            <utu:AutoLayout Spacing="50" Padding="50,0" PrimaryAxisAlignment="Center" Orientation="Horizontal">
                                <utu:AutoLayout Padding="5" CornerRadius="12" utu:AutoLayout.CounterAlignment="Start">
                                    <TextBlock Foreground="{ThemeResource SurfaceInverseBrush}" TextAlignment="Center" Text="55" utu:AutoLayout.CounterAlignment="Center" Style="{StaticResource HeadlineMedium}" />
                                    <TextBlock Foreground="{ThemeResource OnSurfaceVariantBrush}" Text="Recipes" utu:AutoLayout.CounterAlignment="Center" Style="{StaticResource LabelSmall}" />
                                </utu:AutoLayout>
                                <utu:AutoLayout Padding="5" CornerRadius="12" utu:AutoLayout.CounterAlignment="Start">
                                    <TextBlock Foreground="{ThemeResource SurfaceInverseBrush}" TextAlignment="Center" TextWrapping="Wrap" Text="{Binding Data.Followers}" Style="{StaticResource HeadlineMedium}" />
                                    <TextBlock Foreground="{ThemeResource OnSurfaceVariantBrush}" Text="Followers" utu:AutoLayout.CounterAlignment="Center" Style="{StaticResource LabelSmall}" />
                                </utu:AutoLayout>
                                <utu:AutoLayout Padding="5" CornerRadius="12" utu:AutoLayout.CounterAlignment="Start">
                                    <TextBlock Foreground="{ThemeResource SurfaceInverseBrush}" TextAlignment="Center" Text="{Binding Data.Following}" utu:AutoLayout.CounterAlignment="Center" Style="{StaticResource HeadlineMedium}" />
                                    <TextBlock Foreground="{ThemeResource OnSurfaceVariantBrush}" Text="Following" utu:AutoLayout.CounterAlignment="Center" Style="{StaticResource LabelSmall}" />
                                </utu:AutoLayout>
                            </utu:AutoLayout>
                        </utu:AutoLayout>
                    </DataTemplate>
                </uer:FeedView>
                <ScrollViewer utu:AutoLayout.PrimaryAlignment="Stretch">
                    <utu:AutoLayout Padding="18,0">
                        <utu:AutoLayout uen:Region.Attached="True" Spacing="18" Padding="0,20">
                            <utu:TabBar uen:Region.Attached="True"
                                        Style="{StaticResource TopTabBarStyle}">
                                <utu:TabBarItem Foreground="{ThemeResource SurfaceBrush}" 
                                                uen:Region.Name="MyRecipes"
                                                IsSelectable="True"
                                                Content="My Recipes" />
                                <utu:TabBarItem Foreground="{ThemeResource OnSurfaceMediumBrush}" 
                                                uen:Region.Name="Cookbooks"
                                                IsSelectable="True"
                                                Content="Cookbooks" />
                            </utu:TabBar>
                            <Grid  uen:Region.Attached="True"
                                   uen:Region.Navigator="Visibility"
                                   utu:AutoLayout.CounterAlignment="Start">

                                <!--
									TODO: Both FeedView should be set to collapsed by default
									However, currently setting them to Collapsed by default results
									in no data being shown. ActiveTasks is in XAML second, to position
									it over the top of the CompletedTasks, since they're currently
									both visible by default
								-->

                                <uer:FeedView uen:Region.Name="MyRecipes"
                                              Visibility="Visible"
                                              Source="{Binding Recipes}">
                                    <DataTemplate>
                                        <ListView ItemsSource="{Binding Data}" 
                                                  IsItemClickEnabled="True"
                                                  Style="{StaticResource ListViewStyle}">
                                                  <!--utu:ControlExtensions.Command="{Binding DataContext.DoRecipeNavigation, ElementName=Root}"-->
                                                  
                                            <ListView.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <ItemsStackPanel Orientation="Horizontal" />
                                                </ItemsPanelTemplate>
                                            </ListView.ItemsPanel>
                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <utu:CardContentControl utu:AutoLayout.CounterLength="170" 
                                                                            Style="{StaticResource OutlinedCardContentControlStyle}">
                                                        <utu:CardContentControl.ContentTemplate>
                                                            <DataTemplate>
                                                                <utu:AutoLayout Background="{ThemeResource SurfaceBrush}" CornerRadius="12">
                                                                    <Image Source="{Binding ImageUrl}" Stretch="UniformToFill" utu:AutoLayout.PrimaryLength="70" MaxHeight="144" />
                                                                    <utu:AutoLayout Spacing="2" Padding="16,10" PrimaryAxisAlignment="Center">
                                                                        <TextBlock Foreground="{ThemeResource OnSurfaceBrush}" TextWrapping="Wrap" Text="{Binding Name}" Style="{StaticResource TitleMedium}" />
                                                                        <TextBlock Foreground="{ThemeResource OnSurfaceVariantBrush}" TextWrapping="Wrap" Text="{Binding TimeCal}" Style="{StaticResource BodySmall}" />
                                                                    </utu:AutoLayout>
                                                                </utu:AutoLayout>
                                                            </DataTemplate>
                                                        </utu:CardContentControl.ContentTemplate>
                                                    </utu:CardContentControl>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>
                                        </ListView>
                                    </DataTemplate>
                                </uer:FeedView>

                                <uer:FeedView uen:Region.Name="Cookbooks"
                                              Visibility="Visible"
                                              Source="{Binding Cookbooks}">
                                    <DataTemplate>
                                        <ListView ItemsSource="{Binding Data}"
                                                  IsItemClickEnabled="True"
											      SelectionMode="None"
                                                  Style="{StaticResource ListViewStyle}">
                                                  <!--utu:ControlExtensions.Command="{Binding DataContext.DoCookbookNavigation, ElementName=Root}"-->
                                                  
                                            <ListView.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <ItemsStackPanel Orientation="Horizontal" />
                                                </ItemsPanelTemplate>
                                            </ListView.ItemsPanel>
                                            <ListView.ItemTemplate>
                                                <DataTemplate>
                                                    <utu:CardContentControl utu:AutoLayout.CounterLength="170"
                                                        Style="{StaticResource OutlinedCardContentControlStyle}">
                                                        <utu:CardContentControl.ContentTemplate>
                                                            <DataTemplate>
                                                                <utu:AutoLayout Background="{ThemeResource SurfaceBrush}" CornerRadius="12">
                                                                    <Image Source="https://picsum.photos/70/145" Stretch="UniformToFill" utu:AutoLayout.PrimaryLength="144" MaxHeight="144" />
                                                                    <utu:AutoLayout Spacing="2" Padding="16,10" PrimaryAxisAlignment="Center">
                                                                        <TextBlock Foreground="{ThemeResource OnSurfaceBrush}" TextWrapping="Wrap" Text="{Binding Name}" Style="{StaticResource TitleMedium}" />
                                                                        <TextBlock Foreground="{ThemeResource OnSurfaceVariantBrush}" TextWrapping="Wrap" Text="{Binding PinsNumber}" Style="{StaticResource BodySmall}" />
                                                                    </utu:AutoLayout>
                                                                </utu:AutoLayout>
                                                            </DataTemplate>
                                                        </utu:CardContentControl.ContentTemplate>
                                                    </utu:CardContentControl>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>
                                        </ListView>
                                    </DataTemplate>
                                </uer:FeedView>
                            </Grid>
                        </utu:AutoLayout>
                    </utu:AutoLayout>
                </ScrollViewer>
            </utu:AutoLayout>
        </utu:AutoLayout>
    </Grid>
</Page>
